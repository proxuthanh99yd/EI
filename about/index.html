<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../assets/reset.css" />
        <link rel="stylesheet" href="../assets/global.css" />
        <link rel="stylesheet" href="./styles.css" />
        <title>Document</title>
    </head>
    <body style="padding-top: 100rem">
        <section class="about container">
            <div class="about__intro">
                <div class="sub-heading about__title">
                    <h2 class="">About EI Group</h2>
                </div>
                <div class="about__description">
                    <p class="">
                        <b>We are ready to turn your dreams</b> into reality (EI
                        GROUP) is a pioneering unit in the field of foreign
                        language <b>training and</b> consultancy
                        <b>for studying abroad,</b> human resources,
                        immigration..
                    </p>
                </div>
                <a href="#about-us" class="btn btn__primary about__cta-btn"
                    >About Us
                    <img src="../assets/image/Chevron_Right_MD.svg" alt=""
                /></a>
            </div>

            <div class="about__stats">
                <div class="stats__item"></div>
                <div class="stats__item">
                    <img
                        src="../assets/image/5d1a48cc4c40ecd5f07665a111700735.png"
                        alt="Image 1"
                        class="stats__image"
                    />
                    <img
                        src="../assets/image/c83810d11664afc2f064992f58baf5ea.png"
                        alt="Image 2"
                        class="stats__image"
                    />
                    <img
                        src="../assets/image/cff398521488250c7a8550e1aa865aca.png"
                        alt="Image 3"
                        class="stats__image"
                    />
                </div>
            </div>

            <div class="about__numbers">
                <div class="numbers__item">
                    <h3 class="numbers__value" data-target="18">18</h3>
                    <p class="numbers__label">Years of Operation</p>
                </div>
                <div class="numbers__item">
                    <h3 class="numbers__value" data-target="2500">2500</h3>
                    <p class="numbers__label">Customers & Students</p>
                </div>
                <div class="numbers__item">
                    <h3 class="numbers__value" data-target="15">15</h3>
                    <p class="numbers__label">Member Company</p>
                </div>
            </div>

            <div class="about__video">
                <video
                    class="about__video-content"
                    poster="../assets/image/cff398521488250c7a8550e1aa865aca.png"
                >
                    <source src="../assets/image/banner.mp4" type="video/mp4" />
                    Your browser does not support the video tag.
                </video>
                <button class="about__video-btn">
                    <img src="../assets/image/Polygon 6.svg" alt="" />
                </button>
            </div>
        </section>
        <script>
            // Function to animate the count
            function countUp(element, target) {
                const startValue = 0;
                const duration = 1000; // Duration in milliseconds (2 seconds)
                const startTime = performance.now();

                function updateCount(currentTime) {
                    const elapsedTime = currentTime - startTime;
                    const progress = Math.min(elapsedTime / duration, 1); // Ensure progress doesn't exceed 1
                    const currentValue = Math.floor(progress * target); // Calculate the current number
                    element.textContent = currentValue + "+";

                    if (progress < 1) {
                        requestAnimationFrame(updateCount); // Continue animation if progress is less than 100%
                    }
                }

                requestAnimationFrame(updateCount);
            }

            // Create an Intersection Observer to observe the about__numbers section
            const observer = new IntersectionObserver(
                (entries, observer) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const numberElements =
                                entry.target.querySelectorAll(
                                    ".numbers__value"
                                );
                            numberElements.forEach((numElement) => {
                                const targetValue =
                                    +numElement.getAttribute("data-target"); // Get the target number
                                countUp(numElement, targetValue);
                            });
                            observer.unobserve(entry.target); // Stop observing once animation has started
                        }
                    });
                },
                {
                    threshold: 0.5, // Trigger when 50% of the section is visible
                }
            );

            // Start observing the numbers section
            const numbersSection = document.querySelector(".about__numbers");
            observer.observe(numbersSection);

            const btnPlay = document.querySelector(".about__video-btn");
            const video = document.querySelector(".about__video-content");
            video.addEventListener("pause", (event) => {
                btnPlay.style.visibility = null;
                btnPlay.style.opacity = null;
                video.controls = !video.controls;
            });
            video.addEventListener("play", (event) => {
                btnPlay.style.visibility = "hidden";
                btnPlay.style.opacity = "0";
                video.controls = !video.controls;
            });
            btnPlay.addEventListener("click", () => {
                video.play();
            });
        </script>
    </body>
</html>
